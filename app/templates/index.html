{% extends "base.html" %}

{% block content %}

<!-- Hero Section -->
<section id="home" class="hero">
    <div class="hero-content">
        <div class="hero-text">
            <h1 class="hero-title">Vesti i tuoi piccoli con stile</h1>
            <p class="hero-subtitle">Noleggio di moda sostenibile per bambini. Occasioni speciali, magia quotidiana.</p>
            <div class="hero-buttons">
                <a href="#products" class="btn btn-primary">Esplora Collezione</a>
                <a href="#how-it-works" class="btn btn-secondary">Come Funziona</a>
            </div>
        </div>
        <div class="hero-image">
            <div class="hero-image-placeholder">
                <i class="fas fa-child"></i>
            </div>
        </div>
    </div>
    <div class="hero-features">
        <div class="feature-card">
            <i class="fas fa-leaf"></i>
            <h3>Sostenibile</h3>
            <p>Riduci gli sprechi, abbraccia la moda circolare</p>
        </div>
        <div class="feature-card">
            <i class="fas fa-euro-sign"></i>
            <h3>Conveniente</h3>
            <p>Qualità premium senza il prezzo premium</p>
        </div>
        <div class="feature-card">
            <i class="fas fa-rotate"></i>
            <h3>Flessibile</h3>
            <p>Noleggia per giorni, settimane o eventi speciali</p>
        </div>
    </div>
</section>

<!-- Products / Catalog Section -->
<section id="products" class="section products-section">
    <div class="container">
        <h2 class="section-title">La Nostra Collezione</h2>
        <p class="section-subtitle">Outfit selezionati per ogni occasione</p>

        <!-- Search and Filter Bar -->
        <div class="filter-bar">
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="searchInput" placeholder="Cerca per titolo, colore, categoria...">
            </div>
            <div class="filter-group">
                <select id="categoryFilter" class="filter-select">
                    <option value="">Tutte le Categorie</option>
                    <option value="dress">Abiti</option>
                    <option value="suit">Completi</option>
                    <option value="casual">Casual</option>
                    <option value="formal">Formale</option>
                    <option value="party">Festa</option>
                </select>
                <select id="sizeFilter" class="filter-select">
                    <option value="">Tutte le Taglie</option>
                    <option value="XS">XS</option>
                    <option value="S">S</option>
                    <option value="M">M</option>
                    <option value="L">L</option>
                    <option value="XL">XL</option>
                </select>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="products-grid" id="productsGrid">
            <!-- Products will be loaded here via JavaScript -->
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Caricamento prodotti...</p>
            </div>
        </div>
    </div>
</section>

<!-- How It Works Section -->
<section id="how-it-works" class="section how-it-works-section">
    <div class="container">
        <h2 class="section-title">Come funziona il noleggio</h2>
        <p class="section-subtitle">Seguire il processo di noleggio su Stycly è semplice e veloce. Ecco tutti i passaggi:</p>

        <div class="steps-grid">
            <div class="step-card">
                <div class="step-number">
                    <i class="fas fa-search"></i>
                </div>
                <h3>Cerca i prodotti</h3>
                <p>Sfoglia i Prodotti e scopri capi, accessori, props e oggetti per bambini. Filtra per categoria e guarda i dettagli di ogni articolo.</p>
            </div>

            <div class="step-card">
                <div class="step-number">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <h3>Aggiungi al carrello</h3>
                <p>Scegli gli articoli e la quantità desiderata, poi aggiungili al carrello.</p>
            </div>

            <div class="step-card">
                <div class="step-number">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <h3>Invia una richiesta di noleggio</h3>
                <p>Nel carrello clicca su Avanti, seleziona le date di noleggio dal calendario, inserisci i tuoi dati di contatto e conferma la richiesta.</p>
            </div>

            <div class="step-card">
                <div class="step-number">
                    <i class="fas fa-envelope-open-text"></i>
                </div>
                <h3>Ricevi il preventivo</h3>
                <p>Entro 24 ore ti contattiamo via email per confermare disponibilità e inviarti il preventivo personalizzato. Completa ordine via email o telefono.</p>
            </div>

            <div class="step-card">
                <div class="step-number">
                    <i class="fas fa-credit-card"></i>
                </div>
                <h3>Pagamento e fatturazione</h3>
                <p>Pagamento concordato con il nostro operatore (non online al momento) e ricezione della fattura.</p>
            </div>
        </div>
    </div>
</section>

<!-- About Us Section -->
<section id="about" class="section about-section">
    <div class="container">
        <div class="about-content">
            <div class="about-text">
                <h2 class="section-title">Chi Siamo</h2>
                <p class="about-intro">Siamo in missione per rendere la moda per bambini sostenibile, accessibile e gioiosa.</p>

                <p>Stycly è nato da un'idea semplice: i bambini crescono velocemente, ma i vestiti belli non dovrebbero finire in discarica. Abbiamo creato una piattaforma dove genitori, fotografi e famiglie possono accedere a abbigliamento premium per bambini per ogni occasione, senza il costo ambientale della fast fashion.</p>

                <p>Il nostro modello di moda circolare significa che ogni capo ha più vite, riducendo gli sprechi e rendendo le scelte sostenibili facili e convenienti. Che tu abbia bisogno di un outfit per un servizio fotografico di famiglia, un matrimonio, una festa di compleanno, o semplicemente vuoi provare nuovi stili senza impegno, siamo qui per aiutarti.</p>

                <div class="about-values">
                    <div class="value-item">
                        <i class="fas fa-recycle"></i>
                        <h4>Economia Circolare</h4>
                        <p>Ogni noleggio riduce gli sprechi tessili e supporta il consumo sostenibile</p>
                    </div>
                    <div class="value-item">
                        <i class="fas fa-hand-holding-heart"></i>
                        <h4>Qualità Prima di Tutto</h4>
                        <p>Selezioniamo solo il meglio, assicurando che ogni pezzo soddisfi i nostri alti standard</p>
                    </div>
                    <div class="value-item">
                        <i class="fas fa-users"></i>
                        <h4>Comunità</h4>
                        <p>Costruiamo una comunità di genitori consapevoli e appassionati di stile</p>
                    </div>
                </div>
            </div>

            <div class="about-image">
                <div class="about-image-placeholder">
                    <i class="fas fa-seedling"></i>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="section contact-section">
    <div class="container">
        <h2 class="section-title">Contattaci</h2>
        <p class="section-subtitle">Hai domande? Ci piacerebbe sentirti!</p>

        <div class="contact-content">
            <div class="contact-form-wrapper">
                <form method="POST" action="{{ url_for('main.contact') }}" class="contact-form">
                    <div class="form-group">
                        <label for="contact-name">Il Tuo Nome</label>
                        <input type="text" id="contact-name" name="name" required>
                    </div>

                    <div class="form-group">
                        <label for="contact-email">Indirizzo Email</label>
                        <input type="email" id="contact-email" name="email" required>
                    </div>

                    <div class="form-group">
                        <label for="contact-message">Messaggio</label>
                        <textarea id="contact-message" name="message" rows="5" required></textarea>
                    </div>

                    <button type="submit" class="btn btn-accent">Invia Messaggio</button>
                </form>
            </div>

            <div class="contact-info">
                <div class="contact-info-item">
                    <i class="fas fa-envelope"></i>
                    <div>
                        <h4>Email</h4>
                        <p>info@stycly.com</p>
                    </div>
                </div>

                <div class="contact-info-item">
                    <i class="fas fa-phone"></i>
                    <div>
                        <h4>Telefono</h4>
                        <p>+39 123 456 7890</p>
                    </div>
                </div>

                <div class="contact-info-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <div>
                        <h4>Posizione</h4>
                        <p>Milano, Italia</p>
                    </div>
                </div>

                <div class="contact-info-item">
                    <i class="fas fa-clock"></i>
                    <div>
                        <h4>Orari di Apertura</h4>
                        <p>Lunedì - Venerdì: 9:00 - 18:00<br>Sabato: 10:00 - 16:00</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% if session.user_id %}
<!-- Private Wardrobe Section (Logged-in Users Only) -->
<section id="wardrobe" class="section wardrobe-section">
    <div class="container">
        <h2 class="section-title">Il Mio Guardaroba Privato</h2>
        <p class="section-subtitle">Gestisci la tua collezione</p>

        <!-- Add Item Form -->
        <div class="wardrobe-add-form">
            <button class="btn btn-accent" onclick="toggleAddItemForm()">
                <i class="fas fa-plus"></i> Aggiungi Nuovo Articolo
            </button>
            
            <form id="addItemForm" method="POST" action="{{ url_for('wardrobe.add_item') }}" enctype="multipart/form-data" class="item-form" style="display: none;">
                <div class="form-row">
                    <div class="form-group">
                        <label for="title">Titolo *</label>
                        <input type="text" id="title" name="title" required placeholder="es., Vestito Estivo Blu">
                    </div>

                    <div class="form-group">
                        <label for="destination">Destinazione *</label>
                        <select id="destination" name="destination" required>
                            <option value="">Seleziona Destinazione</option>
                            <option value="Bambino">Bambino</option>
                            <option value="Bambina">Bambina</option>
                            <option value="Stycly props">Stycly Props</option>
                            <option value="Stycly accessories">Stycly Accessories</option>
                            <option value="Stycly Vintage">Stycly Vintage</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="category">Categoria *</label>
                        <select id="category" name="category" required>
                            <option value="">Seleziona Categoria</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="size">Taglia</label>
                        <select id="size" name="size">
                            <option value="">Seleziona Taglia</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="description">Descrizione</label>
                    <textarea id="description" name="description" rows="3" placeholder="Descrivi l'articolo in dettaglio..."></textarea>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="color">Colore</label>
                        <select id="color" name="color">
                            <option value="">Seleziona Colore</option>
                            <option value="White">White</option>
                            <option value="Ivory">Ivory</option>
                            <option value="Cream">Cream</option>
                            <option value="Beige">Beige</option>
                            <option value="Black">Black</option>
                            <option value="Gray">Gray</option>
                            <option value="Red">Red</option>
                            <option value="Pink">Pink</option>
                            <option value="Rose">Rose</option>
                            <option value="Coral">Coral</option>
                            <option value="Orange">Orange</option>
                            <option value="Peach">Peach</option>
                            <option value="Yellow">Yellow</option>
                            <option value="Gold">Gold</option>
                            <option value="Green">Green</option>
                            <option value="Mint">Mint</option>
                            <option value="Sage">Sage</option>
                            <option value="Olive">Olive</option>
                            <option value="Blue">Blue</option>
                            <option value="Navy">Navy</option>
                            <option value="Sky Blue">Sky Blue</option>
                            <option value="Turquoise">Turquoise</option>
                            <option value="Teal">Teal</option>
                            <option value="Purple">Purple</option>
                            <option value="Lavender">Lavender</option>
                            <option value="Violet">Violet</option>
                            <option value="Brown">Brown</option>
                            <option value="Tan">Tan</option>
                            <option value="Camel">Camel</option>
                            <option value="Silver">Silver</option>
                            <option value="Metallic Gold">Metallic Gold</option>
                            <option value="Rose Gold">Rose Gold</option>
                            <option value="Multicolor">Multicolor</option>
                            <option value="Floral">Floral</option>
                            <option value="Striped">Striped</option>
                            <option value="Polka Dot">Polka Dot</option>
                            <option value="Checkered">Checkered</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="condition">Condizione *</label>
                        <select id="condition" name="condition" required>
                            <option value="">Seleziona Condizione</option>
                            <option value="New with Tags">Nuovo con Etichette</option>
                            <option value="New without Tags">Nuovo senza Etichette</option>
                            <option value="Like New">Come Nuovo</option>
                            <option value="Excellent">Eccellente</option>
                            <option value="Very Good">Molto Buono</option>
                            <option value="Good">Buono</option>
                            <option value="Fair">Discreto</option>
                            <option value="Vintage">Vintage</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="stock">Quantità Disponibile</label>
                        <input type="number" id="stock" name="stock" min="1" value="1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="images">Immagini (Multiplo consentito)</label>
                    <input type="file" id="images" name="images" accept="image/*" multiple>
                    <small class="form-help">Puoi selezionare più immagini. Trascina per riordinare.</small>
                    <div id="imagePreviewContainer" class="image-preview-container"></div>
                </div>

                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" name="is_public" checked>
                        <span>Rendi pubblicamente disponibile per il noleggio</span>
                    </label>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-accent">Aggiungi Articolo</button>
                    <button type="button" class="btn btn-secondary" onclick="toggleAddItemForm()">Annulla</button>
                </div>
            </form>
        </div>
        
        <!-- Wardrobe Items Grid -->
        <div class="wardrobe-items" id="wardrobeItems">
            <!-- Items will be loaded here or shown from server -->
            <p class="no-items">Non hai ancora aggiunto articoli. Clicca su "Aggiungi Nuovo Articolo" per iniziare!</p>
        </div>
    </div>
</section>
{% endif %}

<!-- Rental Request Section (Cart Checkout) -->
<section id="rental-request" class="section rental-section">
    <div class="container">
        <h2 class="section-title">Completa la Tua Richiesta di Noleggio</h2>
        <p class="section-subtitle">Solo qualche dettaglio in più e sei pronto!</p>
        
        <form method="POST" action="{{ url_for('orders.submit_order') }}" class="rental-form">
            <div class="form-section">
                <h3><i class="fas fa-calendar"></i> Periodo di Noleggio</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label for="start_date">Data Inizio *</label>
                        <input type="date" id="start_date" name="start_date" required>
                    </div>

                    <div class="form-group">
                        <label for="end_date">Data Fine *</label>
                        <input type="date" id="end_date" name="end_date" required>
                    </div>
                </div>
            </div>

            <div class="form-section">
                <h3><i class="fas fa-user"></i> Le Tue Informazioni</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label for="rental_name">Nome Completo *</label>
                        <input type="text" id="rental_name" name="name" {% if session.user_name %}value="{{ session.user_name }}"{% endif %} required>
                    </div>

                    <div class="form-group">
                        <label for="rental_email">Indirizzo Email *</label>
                        <input type="email" id="rental_email" name="email" {% if session.user_email %}value="{{ session.user_email }}"{% endif %} required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="phone">Numero di Telefono</label>
                    <input type="tel" id="phone" name="phone">
                </div>

                <div class="form-group">
                    <label for="notes">Note / Richieste Speciali</label>
                    <textarea id="notes" name="notes" rows="4" placeholder="Eventuali richieste speciali o informazioni che dovremmo sapere..."></textarea>
                </div>
            </div>

            <div class="form-section">
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" name="privacy" required>
                        <span>Accetto la <a href="#" target="_blank">Privacy Policy</a> e i <a href="#" target="_blank">Termini e Condizioni</a> *</span>
                    </label>
                </div>
            </div>

            <div class="form-actions centered">
                <button type="submit" class="btn btn-primary btn-large">
                    <i class="fas fa-paper-plane"></i> Invia Richiesta di Noleggio
                </button>
            </div>
        </form>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/products.js') }}"></script>
{% if session.user_id %}
<script src="{{ url_for('static', filename='js/wardrobe.js') }}"></script>
<script src="{{ url_for('static', filename='js/wardrobe-form.js') }}"></script>
{% endif %}
{% endblock %}
